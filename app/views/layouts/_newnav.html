{% set data = [
    {
        "nav": "Standards",
        "url": "/standards",
        "sections": [
            {
                "section": "Standard for the publication of accessibility statements",
                "sub-sections": [
                    {
                        "title": "Standard",
                        "url": "/standards/accessibility-statements"
                    },
                    {
                        "title": "How to meet this standard",
                        "url": "/standards/accessibility-statements/how-to-meet"
                    },
                    {
                        "title": "Compliance",
                        "url": "/standards/accessibility-statements/compliance"
                    }
                ]
            },{
                "section": "Standard for managing issues",
                "sub-sections": [
                    {
                        "title": "Manage accessibility issues",
                        "url": "/standards/accessibility-issues"
                    }
                ]
            },{
                "section": "Standard for accessibility audits",
                "sub-sections": [
                    {
                        "title": "Product and service accessibility audits",
                        "url": "/standards/accessibility-audits"
                    }
                ]
            },{
                "section": "Laws and regulatory frameworks",
                "sub-sections": [
                    {
                        "title": "Overview of accessibility regulations",
                        "url": "/standards/regulations"
                    }
                ]
            }
        ]
    },
    {
        "nav": "Audits and statements",
        "url": "/audits-statements",
        "sections": [
            {
                "section": "Audits",
                "sub-sections": [
                    {
                        "title": "Why you need an audit",
                        "url": "/audits-statements/audits"
                    },
                    {
                        "title": "Prepare for an audit",
                        "url": "/audits-statements/audits/prepare"
                    },
                    {
                        "title": "After an audit",
                        "url": "/audits-statements/audits/after-audit"
                    }
                ]
            },
            {
                "section": "Statements",
                "sub-sections": [
                    {
                        "title": "Accessibility statements",
                        "url": "/audits-statements/accessibility-statements"
                    },
                    {
                        "title": "Fully compliant template",
                        "url": "/audits-statements/accessibility-statements/fully-compliant"
                    },
                    {
                        "title": "Partially compliant template",
                        "url": "/audits-statements/accessibility-statements/partially-compliant"
                    },
                    {
                        "title": "Non-compliant template",
                        "url": "/audits-statements/accessibility-statements/non-compliant"
                    }

                ]   
            }
        ]
    },{
        "nav": "Knowledge hub",
        "url": "/knowledge-hub",
        "sections": [
        {
                "section": "Common issues",
                "sub-sections": [
                    {
                        "title": "Common accessibility issues",
                        "url": "/knowledge-hub/common-issues"
                    },
                    {
                        "title": "Form error messages",
                        "url": "/knowledge-hub/common-issues/error-messages"
                    },
                    {
                        "title": "Images, charts, and alt text",
                        "url": "/knowledge-hub/common-issues/alt-text"
                    },
                    {
                        "title": "Non-descriptive links",
                        "url": "/knowledge-hub/common-issues/links"
                    },
                    {
                        "title": "Content with insufficient contrast",
                        "url": "/knowledge-hub/common-issues/contrast"
                    },
                    {
                        "title": "Incorrect heading structure",
                        "url": "/knowledge-hub/common-issues/headings"
                    },
                    {
                        "title": "Status changes to content",
                        "url": "/knowledge-hub/common-issues/status-changes"
                    }
                ]
            }, {
                "section": "Manage and prioritise issues",
                "sub-sections": [
                    {
                        "title": "Manage issues",
                        "url": "/knowledge-hub/manage-issues"
                    },
                     {
                        "title": "Disproportionate burden",
                        "url": "/knowledge-hub/manage-issues/disproportionate-burden"
                    }
                    ]
            },
              {
                "section": "Tools",
                "sub-sections": [
                    {
                        "title": "Overview",
                        "url": "/knowledge-hub/tools-testing"
                    },{
                        "title": "Accessibility Insights",
                        "url": "/knowledge-hub/tools-testing/tools/accessibility-insights"
                    },
                    {
                        "title": "ARC Toolkit",
                        "url": "/knowledge-hub/tools-testing/tools/arc"
                    },
                    {
                        "title": "axe DevTools",
                        "url": "/knowledge-hub/tools-testing/tools/axe"
                    },
                    {
                        "title": "Contrast Checker", 
                        "url": "/knowledge-hub/tools-testing/tools/contrast"
                    },
                    {
                        "title": "HeadingsMap",
                        "url": "/knowledge-hub/tools-testing/tools/headings-map"
                    },
                    {
                        "title": "WAVE Evaluation",
                        "url": "/knowledge-hub/tools-testing/tools/wave"
                    }
                    
                ]
            },
            {
                 "section": "Bookmarklets",
                "sub-sections": [
                    {
                        "title": "Overview",
                        "url": "/knowledge-hub/tools-testing/bookmarklets"
                    },
                     {
                        "title": "Blur",
                        "url": "/knowledge-hub/tools-testing/bookmarklets/blur"
                    },
                     {
                        "title": "Lists",
                        "url": "/knowledge-hub/tools-testing/bookmarklets/lists"
                    },{
                        "title": "Resize text",
                        "url": "/knowledge-hub/tools-testing/bookmarklets/resize-text"
                    },
                     {
                        "title": "Target size",
                        "url": "/knowledge-hub/tools-testing/bookmarklets/target-size"
                    },
                     {
                        "title": "Text spacing",
                        "url": "/knowledge-hub/tools-testing/bookmarklets/text-spacing"
                    }
                ]
            },
            {
                 "section": "False positives and false assurance",
                "sub-sections": [
                    {
                        "title": "Overview",
                        "url": "/knowledge-hub/tools-testing/false-positives"
                    }
                ]
            } ,
            {
                 "section": "WCAG",
                "sub-sections": [
                    {
                        "title": "Overview",
                        "url": "/knowledge-hub/wcag"
                    }, {
                        "title": "Conformance",
                        "url": "/knowledge-hub/wcag/conformance"
                    }, {
                        "title": "Criteria and techniques",
                        "url": "/knowledge-hub/wcag/criteria"
                    }, {
                        "title": "Perceivable",
                        "url": "/knowledge-hub/wcag/criteria/perceivable"
                    }, {
                        "title": "Operable",
                        "url": "/knowledge-hub/wcag/criteria/operable"
                    }, {
                        "title": "Understandable",
                        "url": "/knowledge-hub/wcag/criteria/understandable"
                    }, {
                        "title": "Robust",
                        "url": "/knowledge-hub/wcag/criteria/robust"
                    }

                    
                ]
            } 
            ]
 },
 {
        "nav": "WCAG criteria",
        "url": "/knowledge-hub/wcag/criteria",
        "sections": [
    {
        "section": "Perceivable",
        "sub-sections": [
            {
                "title": "1.1.1 - Non-text content",
                "url": "/wcag/1-1-1"
            },
            {
                "title": "1.2.1 - Audio-only and Video-only (Prerecorded)",
                "url": "/wcag/1-2-1"
            },
            {
                "title": "1.2.2 - Captions (Prerecorded)",
                "url": "/wcag/1-2-2"
            },
            {
                "title": "1.2.3 - Audio Description or Media Alternative (Prerecorded)",
                "url": "/wcag/1-2-3"
            },
            {
                "title": "1.2.4 - Captions (Live)",
                "url": "/wcag/1-2-4"
            },
            {
                "title": "1.2.5 - Audio Description (Prerecorded)",
                "url": "/wcag/1-2-5"
            },
            {
                "title": "1.3.1 - Info and Relationships",
                "url": "/wcag/1-3-1"
            },
            {
                "title": "1.3.2 - Meaningful Sequence",
                "url": "/wcag/1-3-2"
            },
            {
                "title": "1.3.3 - Sensory Characteristics",
                "url": "/wcag/1-3-3"
            },
            {
                "title": "1.3.4 - Orientation",
                "url": "/wcag/1-3-4"
            },
            {
                "title": "1.3.5 - Identify Input Purpose",
                "url": "/wcag/1-3-5"
            },
            {
                "title": "1.3.6 - Identify Purpose",
                "url": "/wcag/1-3-6"
            },
            {
                "title": "1.4.1 - Use of Color",
                "url": "/wcag/1-4-1"
            },
            {
                "title": "1.4.2 - Audio Control",
                "url": "/wcag/1-4-2"
            },
            {
                "title": "1.4.3 - Contrast (Minimum)",
                "url": "/wcag/1-4-3"
            },
            {
                "title": "1.4.4 - Resize Text",
                "url": "/wcag/1-4-4"
            },
            {
                "title": "1.4.5 - Images of Text",
                "url": "/wcag/1-4-5"
            },
            {
                "title": "1.4.6 - Contrast (Enhanced)",
                "url": "/wcag/1-4-6"
            },
            {
                "title": "1.4.7 - Low or No Background Audio",
                "url": "/wcag/1-4-7"
            },
            {
                "title": "1.4.8 - Visual Presentation",
                "url": "/wcag/1-4-8"
            },
            {
                "title": "1.4.9 - Images of Text (No Exception)",
                "url": "/wcag/1-4-9"
            },
            {
                "title": "1.4.10 - Reflow",
                "url": "/wcag/1-4-10"
            },
            {
                "title": "1.4.11 - Non-text Contrast",
                "url": "/wcag/1-4-11"
            },
            {
                "title": "1.4.12 - Text Spacing",
                "url": "/wcag/1-4-12"
            },
            {
                "title": "1.4.13 - Content on Hover or Focus",
                "url": "/wcag/1-4-13"
            }
        ]
    },
    {
        "section": "Operable",
        "sub-sections": [
            {
                "title": "2.1.1 - Keyboard",
                "url": "/wcag/2-1-1"
            },
            {
                "title": "2.1.2 - No Keyboard Trap",
                "url": "/wcag/2-1-2"
            },
            {
                "title": "2.1.3 - Keyboard (No Exception)",
                "url": "/wcag/2-1-3"
            },
            {
                "title": "2.1.4 - Character Key Shortcuts",
                "url": "/wcag/2-1-4"
            },
            {
                "title": "2.2.1 - Timing Adjustable",
                "url": "/wcag/2-2-1"
            },
            {
                "title": "2.2.2 - Pause, Stop, Hide",
                "url": "/wcag/2-2-2"
            },
            {
                "title": "2.2.3 - No Timing",
                "url": "/wcag/2-2-3"
            },
            {
                "title": "2.2.4 - Interruptions",
                "url": "/wcag/2-2-4"
            },
            {
                "title": "2.2.5 - Re-authenticating",
                "url": "/wcag/2-2-5"
            },
            {
                "title": "2.2.6 - Timeouts",
                "url": "/wcag/2-2-6"
            },
            {
                "title": "2.3.1 - Three Flashes or Below Threshold",
                "url": "/wcag/2-3-1"
            },
            {
                "title": "2.3.2 - Three Flashes",
                "url": "/wcag/2-3-2"
            },
            {
                "title": "2.4.1 - Bypass Blocks",
                "url": "/wcag/2-4-1"
            },
            {
                "title": "2.4.2 - Page Titled",
                "url": "/wcag/2-4-2"
            },
            {
                "title": "2.4.3 - Focus Order",
                "url": "/wcag/2-4-3"
            },
            {
                "title": "2.4.4 - Link Purpose (In Context)",
                "url": "/wcag/2-4-4"
            },
            {
                "title": "2.4.5 - Multiple Ways",
                "url": "/wcag/2-4-5"
            },
            {
                "title": "2.4.6 - Headings and Labels",
                "url": "/wcag/2-4-6"
            },
            {
                "title": "2.4.7 - Focus Visible",
                "url": "/wcag/2-4-7"
            },
            {
                "title": "2.4.8 - Location",
                "url": "/wcag/2-4-8"
            },
            {
                "title": "2.4.9 - Link Purpose (Link Only)",
                "url": "/wcag/2-4-9"
            },
            {
                "title": "2.4.10 - Section Headings",
                "url": "/wcag/2-4-10"
            },
            {
                "title": "2.5.1 - Pointer Gestures",
                "url": "/wcag/2-5-1"
            },
            {
                "title": "2.5.2 - Pointer Cancellation",
                "url": "/wcag/2-5-2"
            },
            {
                "title": "2.5.3 - Label in Name",
                "url": "/wcag/2-5-3"
            },
            {
                "title": "2.5.4 - Motion Actuation",
                "url": "/wcag/2-5-4"
            },
            {
                "title": "2.5.5 - Target Size",
                "url": "/wcag/2-5-5"
            },
            {
                "title": "2.5.6 - Concurrent Input Mechanisms",
                "url": "/wcag/2-5-6"
            }
        ]
    },
    {
        "section": "Understandable",
        "sub-sections": [
            {
                "title": "3.1.1 - Language of Page",
                "url": "/wcag/3-1-1"
            },
            {
                "title": "3.1.2 - Language of Parts",
                "url": "/wcag/3-1-2"
            },
            {
                "title": "3.1.3 - Unusual Words",
                "url": "/wcag/3-1-3"
            },
            {
                "title": "3.1.4 - Abbreviations",
                "url": "/wcag/3-1-4"
            },
            {
                "title": "3.1.5 - Reading Level",
                "url": "/wcag/3-1-5"
            },
            {
                "title": "3.1.6 - Pronunciation",
                "url": "/wcag/3-1-6"
            },
            {
                "title": "3.2.1 - On Focus",
                "url": "/wcag/3-2-1"
            },
            {
                "title": "3.2.2 - On Input",
                "url": "/wcag/3-2-2"
            },
            {
                "title": "3.2.3 - Consistent Navigation",
                "url": "/wcag/3-2-3"
            },
            {
                "title": "3.2.4 - Consistent Identification",
                "url": "/wcag/3-2-4"
            },
            {
                "title": "3.2.5 - Change on Request",
                "url": "/wcag/3-2-5"
            },
            {
                "title": "3.3.1 - Error Identification",
                "url": "/wcag/3-3-1"
            },
            {
                "title": "3.3.2 - Labels or Instructions",
                "url": "/wcag/3-3-2"
            },
            {
                "title": "3.3.3 - Error Suggestion",
                "url": "/wcag/3-3-3"
            },
            {
                "title": "3.3.4 - Error Prevention (Legal, Financial, Data)",
                "url": "/wcag/3-3-4"
            },
            {
                "title": "3.3.5 - Help",
                "url": "/wcag/3-3-5"
            },
            {
                "title": "3.3.6 - Error Prevention (All)",
                "url": "/wcag/3-3-6"
            }
        ]
    },
    {
        "section": "Robust",
        "sub-sections": [
            {
                "title": "4.1.1 - Parsing",
                "url": "/wcag/4-1-1"
            },
            {
                "title": "4.1.2 - Name, Role, Value",
                "url": "/wcag/4-1-2"
            },
            {
                "title": "4.1.3 - Status Messages",
                "url": "/wcag/4-1-3"
            }
        ]
    }
]
    }
] %}

{% set selectedSection = null %}

{% set navSections = [] %}

{% for item in data %}
    {% if item.nav == selectedNav %}
        {% set selectedSection = item %}
        {% set navSections = item.sections %}
    {% endif %}
{% endfor %}

<nav class="navbar" aria-label="Secondary navigation">
    {%- if selectedSection %}
        <ul class="nav-list">

            <li>
                <a href="{{selectedSection.url}}" class="nav-link">
                    {{selectedSection.nav}}
                </a>
            </li>

            {% for section in navSections %}
                <li>
                    <button type="button" aria-expanded="false" aria-controls="sub-nav-{{ section.section | slugify }}" class="nav-link-toggle">
                        {{ section.section }}
                        <span class="icon"></span>
                    </button>
                    <ul id="sub-nav-{{ section.section | slugify }}" class="sub-nav">
                        {% for sub_section in section['sub-sections'] %}
                            <li>
                                <a href="{{ sub_section.url }}" class="{% if sub_section.title == pageName %} sub-nav--active {% endif %}">{{ sub_section.title }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
</nav>